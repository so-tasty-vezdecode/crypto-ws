(this["webpackJsonpcrypto-ws"]=this["webpackJsonpcrypto-ws"]||[]).push([[0],{136:function(e,t,c){},215:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),s=c(24),a=c.n(s),i=c(68),u=c(218),o=c(219),b=c(95),l=c.n(b),j={getCurrencies:"https://api.exchange.bitcoin.com/api/2/public/ticker"},f=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){fetch(j.getCurrencies).then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return e.symbol.match(/\w+?USD/)}))})).then(r)}),[]),{currencies:c}},m=c(109),p=c.n(m),d=function(e){var t=p()("wss://api.exchange.bitcoin.com/api/2/ws/public",{onMessage:function(t){return e(JSON.parse(t.data))},share:!0}).sendJsonMessage;return{subscribe:Object(n.useCallback)((function(e){var c=e.ticker;t({method:"subscribeTicker",params:{symbol:"".concat(c,"USD")}})}),[t]),unsubscribe:Object(n.useCallback)((function(e){var c=e.ticker;t({method:"unsubscribeTicker",params:{symbol:"".concat(c,"USD")}})}),[t])}},h=(c(136),c(137),c(36)),O=Object(n.memo)((function(e){var t=e.id,c=Object(n.useState)(null),r=Object(i.a)(c,2),s=r[0],a=r[1],u=Object(n.useCallback)((function(e){"ticker"===e.method&&e.params.symbol==="".concat(t,"USD")&&a(e.params.last)}),[t]),o=d(u),b=o.subscribe,l=o.unsubscribe;return Object(n.useEffect)((function(){return b({ticker:t}),function(){return l({ticker:t})}}),[t,b,l]),s?"$"+s:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})),S=function(){var e=Object(n.useState)(1),t=Object(i.a)(e,2),c=t[0],r=t[1],s=f().currencies;return console.log(s),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(u.a,{dataSource:s,className:"currencies-table",pagination:{current:c,onChange:r,pageSize:15,size:"small",showSizeChanger:!1},rowKey:function(e){return e.symbol},children:[Object(h.jsx)(l.a,{title:"\u041a\u0440\u0438\u043f\u0442\u043e\u0432\u0430\u043b\u044e\u0442\u0430",render:function(e,t){return Object(h.jsx)(o.a.Text,{children:t.symbol.replace(/USD/,"")})},dataIndex:"id"},"name"),Object(h.jsx)(l.a,{title:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0430 (USD)",render:function(e,t){return Object(h.jsx)(O,{id:t.symbol.replace(/USD/,"")})}},"quotation")]})})};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.dd5cded0.chunk.js.map