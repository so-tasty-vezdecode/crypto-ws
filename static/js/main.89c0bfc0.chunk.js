(this["webpackJsonpcrypto-ws"]=this["webpackJsonpcrypto-ws"]||[]).push([[0],{238:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(26),a=n.n(r),i=n(68),u=n(317),o=n(316),b=n(114),l=n.n(b),j={getCurrencies:"https://us-central1-sql-academy-285317.cloudfunctions.net/addMessage",websocket:"wss://api.exchange.bitcoin.com/api/2/ws/public"},d=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){fetch(j.getCurrencies).then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return e.symbol.match(/\w+?USD/)}))})).then(s)}),[]),{currencies:n}},m=n(142),f=n.n(m),h=n(141),O=n.n(h),p=function(e){var t=O()(j.websocket,{onMessage:function(t){return e(JSON.parse(t.data))},share:!0}).sendJsonMessage;return{subscribe:Object(c.useCallback)((function(e){var n=e.ticker;t({method:"subscribeTicker",params:{symbol:n}})}),[t]),unsubscribe:Object(c.useCallback)((function(e){var n=e.ticker;t({method:"unsubscribeTicker",params:{symbol:n}})}),[t])}},k=n(32),x=Object(c.memo)((function(e){var t=e.id,n=Object(c.useState)(null),s=Object(i.a)(n,2),r=s[0],a=s[1],u=Object(c.useCallback)((function(e){"ticker"===e.method&&e.params.symbol===t&&a(e.params.last)}),[t]),o=p(u),b=o.subscribe,l=o.unsubscribe;return Object(c.useEffect)((function(){return b({ticker:t}),function(){return l({ticker:t})}}),[t,b,l]),r?"$"+r:Object(k.jsx)(f.a,{style:{width:100,height:16},size:"small",active:!0,shape:"round"})})),y=(n(238),n(239),function(){var e=Object(c.useState)(1),t=Object(i.a)(e,2),n=t[0],s=t[1],r=d().currencies,a=Object(c.useMemo)((function(){return{current:n,onChange:s,pageSize:10,size:"small",showSizeChanger:!1}}),[n]);return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(u.a.Title,{className:"header",children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0432\u0430\u043b\u044e\u0442"}),Object(k.jsxs)(o.a,{dataSource:r,className:"currencies-table",pagination:a,rowKey:function(e){return e.symbol},children:[Object(k.jsx)(l.a,{title:"\u041a\u0440\u0438\u043f\u0442\u043e\u0432\u0430\u043b\u044e\u0442\u0430",render:function(e,t){return Object(k.jsx)(u.a.Text,{children:t.symbol.replace(/USD/,"")})},dataIndex:"id"},"name"),Object(k.jsx)(l.a,{title:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0430 (USD)",render:function(e,t){return Object(k.jsx)(x,{id:t.symbol})}},"quotation")]})]})});a.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(y,{})}),document.getElementById("root"))}},[[313,1,2]]]);
//# sourceMappingURL=main.89c0bfc0.chunk.js.map